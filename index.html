<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SnapToText.ng ‚Äì Free OCR Tool | Extract Text from Images</title>
  <meta name="description" content="Free online OCR tool. Extract text from images, photos, and documents instantly. Supports multiple languages and camera capture.">
  
  <!-- TESSERACT JS v5 -->
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>

  <!-- TAILWIND -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- GOOGLE ADSENSE -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-YOUR_PUBLISHER_ID" crossorigin="anonymous"></script>

  <!-- FONTS -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    body { 
      font-family: 'Inter', sans-serif; 
      background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%);
      min-height: 100vh;
    }
    .glass { 
      background: rgba(255, 255, 255, 0.95); 
      backdrop-filter: blur(12px); 
      border: 1px solid rgba(255,255,255,0.3); 
      box-shadow: 0 8px 32px rgba(2, 132, 199, 0.1);
    }
    .loader-bar { 
      height: 6px; 
      background: linear-gradient(90deg, #0284c7, #0ea5e9); 
      transition: width 0.3s ease;
    }
    video { 
      border-radius: 1.5rem; 
      max-width: 100%;
      border: 3px solid #0ea5e9;
      box-shadow: 0 10px 25px rgba(2, 132, 199, 0.2);
    }
    .tab-btn {
      background: rgba(255, 255, 255, 0.8);
      color: #475569;
      transition: all 0.3s ease;
    }
    .tab-btn.active {
      background-color: #0284c7;
      color: white;
    }
    .tab-btn:hover:not(.active) {
      background: rgba(255, 255, 255, 0.9);
    }
    .drop-zone.dragover {
      border-color: #0284c7;
      background-color: rgba(2, 132, 199, 0.1);
    }
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 12px 20px;
      border-radius: 8px;
      color: white;
      font-weight: 600;
      z-index: 1000;
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s ease;
    }
    .toast.show {
      transform: translateY(0);
      opacity: 1;
    }
    .toast.success {
      background-color: #0284c7;
    }
    .toast.error {
      background-color: #dc2626;
    }
    .camera-container {
      position: relative;
      display: inline-block;
    }
    .camera-overlay {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      background: rgba(2, 132, 199, 0.8);
      padding: 8px 16px;
      border-radius: 8px;
      font-weight: 600;
      pointer-events: none;
    }
    .camera-mode-overlay {
      position: absolute;
      top: 20px;
      left: 20px;
      color: white;
      background: rgba(0, 0, 0, 0.7);
      padding: 8px 16px;
      border-radius: 8px;
      font-weight: 600;
      pointer-events: none;
    }
    #output {
      background: white;
      border: 2px solid #e2e8f0;
      transition: all 0.3s ease;
    }
    #output:focus {
      border-color: #0284c7;
      box-shadow: 0 0 0 3px rgba(2, 132, 199, 0.1);
    }
    .edit-hint {
      background: #f8fafc;
      border-left: 4px solid #0284c7;
    }
    .camera-btn {
      transition: all 0.3s ease;
    }
    .camera-btn.active {
      background-color: #0284c7;
      color: white;
      transform: scale(1.05);
    }
    .ad-container {
      background: white;
      border-radius: 12px;
      padding: 10px;
      margin: 20px 0;
      text-align: center;
      border: 1px solid #e2e8f0;
    }
    .ad-label {
      font-size: 0.75rem;
      color: #64748b;
      margin-bottom: 5px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    .ad-placeholder {
      background: #f8fafc;
      border: 2px dashed #cbd5e1;
      border-radius: 8px;
      padding: 30px;
      text-align: center;
      color: #64748b;
    }
  </style>
</head>

<body class="p-4">

  <!-- Toast Notification -->
  <div id="toast" class="toast hidden"></div>

  <div class="max-w-6xl mx-auto">
    
    <!-- HEADER AD BANNER -->
    <div class="ad-container">
      <div class="ad-label">Advertisement</div>
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-YOUR_PUBLISHER_ID"
           data-ad-slot="1234567890"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>
      <script>
           (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>

    <!-- Header -->
    <div class="text-center mb-10 mt-8">
      <h1 class="text-4xl md:text-5xl font-extrabold bg-gradient-to-r from-cyan-600 to-blue-600 bg-clip-text text-transparent">
        SnapToText.ng
      </h1>
      <p class="text-slate-600 mt-2 text-lg">Free Online OCR - Extract text from images instantly</p>
    </div>

    <!-- Tabs -->
    <div class="flex justify-center mb-8 gap-4">
      <button id="uploadTab" class="tab-btn active px-6 py-3 rounded-xl font-bold">Upload Image</button>
      <button id="cameraTab" class="tab-btn px-6 py-3 rounded-xl font-bold">Live Camera</button>
    </div>

    <!-- UPLOAD SECTION -->
    <div id="uploadSection" class="glass rounded-3xl p-8 mb-8">
      <div id="dropZone" class="border-4 border-dashed border-slate-300 rounded-3xl p-16 cursor-pointer transition drop-zone text-center">
        <div class="mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
          </svg>
        </div>
        <p class="text-2xl font-bold text-slate-700">Drop image or click to upload</p>
        <p class="text-slate-500 mt-2">Supports JPG, PNG, WebP, and other common formats</p>
        <input type="file" id="fileInput" accept="image/*" class="hidden">
      </div>
      <div id="uploadError" class="mt-4 text-red-500 hidden"></div>
    </div>

    <!-- CAMERA SECTION -->
    <div id="cameraSection" class="glass rounded-3xl p-8 hidden">
      <div id="cameraError" class="mb-4 text-red-500 hidden"></div>
      
      <!-- Camera Mode Selector -->
      <div class="flex justify-center gap-4 mb-6">
        <button id="frontCameraBtn" class="camera-btn active bg-blue-100 text-blue-700 px-6 py-3 rounded-xl font-bold flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
          </svg>
          Front Camera
        </button>
        <button id="backCameraBtn" class="camera-btn bg-slate-100 text-slate-700 px-6 py-3 rounded-xl font-bold flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/>
          </svg>
          Back Camera
        </button>
      </div>

      <div class="camera-container">
        <video id="video" autoplay playsinline class="w-full rounded-2xl"></video>
        <div class="camera-overlay">üì∑ Point camera at text</div>
        <div id="cameraModeOverlay" class="camera-mode-overlay">Front Camera</div>
        <div class="absolute inset-0 border-4 border-blue-500 rounded-2xl pointer-events-none opacity-60 hidden" id="cameraFrame"></div>
      </div>

      <div class="text-center mt-6">
        <button id="captureBtn" class="bg-blue-600 hover:bg-blue-500 px-10 py-4 rounded-xl text-white font-bold transition-colors disabled:bg-slate-400 disabled:cursor-not-allowed">
          üì∏ Capture & Extract Text
        </button>
        <button id="stopCamera" class="ml-4 bg-red-600 hover:bg-red-500 px-8 py-4 rounded-xl text-white transition-colors">
          ‚èπÔ∏è Stop Camera
        </button>
      </div>
    </div>

    <!-- IN-CONTENT AD -->
    <div class="ad-container">
      <div class="ad-label">Sponsored</div>
      <ins class="adsbygoogle"
           style="display:block; text-align:center;"
           data-ad-layout="in-article"
           data-ad-format="fluid"
           data-ad-client="ca-pub-YOUR_PUBLISHER_ID"
           data-ad-slot="0987654321"></ins>
      <script>
           (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>

    <!-- LOADER -->
    <div id="loader" class="glass rounded-2xl p-8 text-center hidden">
      <div class="flex justify-center mb-4">
        <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div>
      </div>
      <p class="text-xl mb-4 text-slate-700">Extracting text... <span id="status" class="text-blue-600">0%</span></p>
      <div class="w-full bg-slate-200 rounded-full h-4">
        <div id="progressBar" class="loader-bar w-0 rounded-full"></div>
      </div>
    </div>

    <!-- RESULT SECTION -->
    <div id="result" class="glass rounded-3xl p-8 hidden">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-3xl font-bold text-blue-600">Extracted Text</h2>
        <div class="text-sm text-slate-500" id="charCount">0 characters</div>
      </div>

      <!-- Edit Hint -->
      <div class="edit-hint p-4 rounded-lg mb-4">
        <p class="text-slate-700 text-sm">‚úèÔ∏è <strong>You can edit the text below</strong> - Fix any OCR mistakes or modify as needed</p>
      </div>

      <!-- Editable Text Area -->
      <textarea id="output" class="w-full h-96 bg-white rounded-2xl p-6 text-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 text-slate-800" placeholder="Extracted text will appear here... You can edit it freely!"></textarea>

      <!-- BOTTOM AD -->
      <div class="ad-container mt-6">
        <div class="ad-label">Advertisement</div>
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-YOUR_PUBLISHER_ID"
             data-ad-slot="1122334455"
             data-ad-format="rectangle"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mt-6">
        <button onclick="copyText()" class="bg-blue-600 hover:bg-blue-500 py-4 rounded-xl font-bold transition-colors flex items-center justify-center gap-2 text-white">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
          </svg>
          Copy Text
        </button>
        <button onclick="downloadText()" class="bg-green-600 hover:bg-green-500 py-4 rounded-xl font-bold transition-colors flex items-center justify-center gap-2 text-white">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
          </svg>
          Download .txt
        </button>
        <button onclick="printText()" class="bg-purple-600 hover:bg-purple-500 py-4 rounded-xl font-bold transition-colors flex items-center justify-center gap-2 text-white">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" />
          </svg>
          Print
        </button>
        <button onclick="clearText()" class="bg-slate-600 hover:bg-slate-500 py-4 rounded-xl font-bold transition-colors flex items-center justify-center gap-2 text-white">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
          </svg>
          Clear Text
        </button>
      </div>
    </div>

    <!-- FOOTER AD -->
    <div class="ad-container mt-8">
      <div class="ad-label">Advertisement</div>
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-YOUR_PUBLISHER_ID"
           data-ad-slot="5566778899"
           data-ad-format="link"
           data-full-width-responsive="false"></ins>
      <script>
           (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>

    <p class="text-center text-slate-600 mt-10">Built with love in Naija üá≥üá¨ ‚Ä¢ Free forever</p>
  </div>

  <!-- OCR LOGIC -->
  <script>
    // [All the previous JavaScript code remains exactly the same]
    // Elements
    const uploadTab = document.getElementById('uploadTab');
    const cameraTab = document.getElementById('cameraTab');
    const uploadSection = document.getElementById('uploadSection');
    const cameraSection = document.getElementById('cameraSection');
    const dropZone = document.getElementById('dropZone');
    const fileInput = document.getElementById('fileInput');
    const video = document.getElementById('video');
    const captureBtn = document.getElementById('captureBtn');
    const stopCameraBtn = document.getElementById('stopCamera');
    const cameraFrame = document.getElementById('cameraFrame');
    const output = document.getElementById('output');
    const charCount = document.getElementById('charCount');
    const toast = document.getElementById('toast');
    const frontCameraBtn = document.getElementById('frontCameraBtn');
    const backCameraBtn = document.getElementById('backCameraBtn');
    const cameraModeOverlay = document.getElementById('cameraModeOverlay');

    let stream = null;
    let isProcessing = false;
    let currentCameraMode = 'user';

    function showToast(message, type = 'success') {
      toast.textContent = message;
      toast.className = `toast ${type} ${type === 'success' ? 'success' : 'error'}`;
      toast.classList.remove('hidden');
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => toast.classList.add('hidden'), 300);
      }, 3000);
    }

    uploadTab.onclick = () => { switchTab("upload"); stopCamera(); }
    cameraTab.onclick = () => { switchTab("camera"); startCamera(); }

    function switchTab(tab) {
      [uploadTab, cameraTab].forEach(btn => btn.classList.remove("active"));
      if (tab === "upload") {
        uploadTab.classList.add("active");
        uploadSection.classList.remove("hidden");
        cameraSection.classList.add("hidden");
      } else {
        cameraTab.classList.add("active");
        cameraSection.classList.remove("hidden");
        uploadSection.classList.add("hidden");
      }
    }

    frontCameraBtn.onclick = () => switchCameraMode('user');
    backCameraBtn.onclick = () => switchCameraMode('environment');

    function switchCameraMode(mode) {
      if (currentCameraMode === mode) return;
      currentCameraMode = mode;
      [frontCameraBtn, backCameraBtn].forEach(btn => btn.classList.remove('active', 'bg-blue-100', 'text-blue-700'));
      if (mode === 'user') {
        frontCameraBtn.classList.add('active', 'bg-blue-100', 'text-blue-700');
        backCameraBtn.classList.add('bg-slate-100', 'text-slate-700');
        cameraModeOverlay.textContent = 'Front Camera';
      } else {
        backCameraBtn.classList.add('active', 'bg-blue-100', 'text-blue-700');
        frontCameraBtn.classList.add('bg-slate-100', 'text-slate-700');
        cameraModeOverlay.textContent = 'Back Camera';
      }
      if (stream) {
        stopCamera();
        setTimeout(() => startCamera(), 300);
      }
    }

    async function startCamera() {
      try {
        cameraFrame.classList.remove('hidden');
        const constraints = { video: { facingMode: currentCameraMode, width: { ideal: 1920 }, height: { ideal: 1080 } } };
        stream = await navigator.mediaDevices.getUserMedia(constraints);
        video.srcObject = stream;
        captureBtn.disabled = false;
        setTimeout(() => cameraFrame.classList.add('hidden'), 1000);
        showToast(`Camera started (${currentCameraMode === 'user' ? 'Front' : 'Back'})`);
      } catch (err) {
        if (currentCameraMode === 'environment') {
          showToast("Back camera not available, switching to front camera", 'error');
          currentCameraMode = 'user';
          switchCameraMode('user');
          return;
        }
        showToast("Camera access failed: " + err.message, 'error');
        captureBtn.disabled = true;
      }
    }

    function stopCamera() {
      if (stream) {
        stream.getTracks().forEach(t => t.stop());
        stream = null;
      }
      video.srcObject = null;
      captureBtn.disabled = true;
    }

    stopCameraBtn.onclick = stopCamera;

    captureBtn.onclick = () => {
      if (!stream || isProcessing) return;
      cameraFrame.classList.remove('hidden');
      setTimeout(() => {
        const canvas = document.createElement("canvas");
        const ctx = canvas.getContext("2d");
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
        canvas.toBlob(blob => {
          processImage(blob);
          cameraFrame.classList.add('hidden');
        }, "image/jpeg", 0.95);
      }, 300);
    }

    dropZone.onclick = () => fileInput.click();
    fileInput.onchange = e => {
      if (e.target.files && e.target.files[0]) {
        processImage(e.target.files[0]);
      }
    }

    dropZone.addEventListener("dragover", e => { 
      e.preventDefault(); 
      dropZone.classList.add("dragover"); 
    });
    dropZone.addEventListener("dragleave", () => dropZone.classList.remove("dragover"));
    dropZone.addEventListener("drop", e => {
      e.preventDefault();
      dropZone.classList.remove("dragover");
      const file = e.dataTransfer.files[0];
      if (file && file.type.startsWith("image/")) {
        processImage(file);
      } else {
        showToast("Please drop a valid image file", 'error');
      }
    });

    output.addEventListener('input', updateCharCount);
    function updateCharCount() {
      const count = output.value.length;
      charCount.textContent = `${count} character${count !== 1 ? 's' : ''}`;
    }

    async function processImage(imageFile) {
      if (isProcessing) return;
      isProcessing = true;
      document.getElementById("loader").classList.remove("hidden");
      document.getElementById("result").classList.add("hidden");
      document.getElementById("status").textContent = "0%";
      document.getElementById("progressBar").style.width = "0%";

      try {
        const { data: { text } } = await Tesseract.recognize(
          imageFile,
          "eng",
          {
            logger: m => {
              if (m.status === "recognizing text") {
                let p = Math.round(m.progress * 100);
                document.getElementById("status").textContent = p + "%";
                document.getElementById("progressBar").style.width = p + "%";
              }
            }
          }
        );

        document.getElementById("output").value = text;
        document.getElementById("loader").classList.add("hidden");
        document.getElementById("result").classList.remove("hidden");
        updateCharCount();
        stopCamera();
        showToast("Text extracted successfully! You can now edit it.");
      } catch (error) {
        document.getElementById("loader").classList.add("hidden");
        showToast("OCR failed: " + error.message, 'error');
      }
      isProcessing = false;
    }

    async function copyText() {
      try {
        await navigator.clipboard.writeText(output.value);
        showToast("Text copied to clipboard!");
      } catch (err) {
        output.select();
        document.execCommand('copy');
        showToast("Text copied to clipboard!");
      }
    }

    function downloadText() {
      const text = output.value;
      if (!text.trim()) {
        showToast("No text to download", 'error');
        return;
      }
      const blob = new Blob([text], { type: "text/plain" });
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = `SnapToText-${new Date().toISOString().slice(0, 10)}.txt`;
      a.click();
      showToast("Text downloaded successfully!");
    }

    function printText() {
      const text = output.value;
      if (!text.trim()) {
        showToast("No text to print", 'error');
        return;
      }
      const printWindow = window.open('', '_blank');
      printWindow.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>SnapToText.ng - Extracted Text</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 40px; line-height: 1.6; max-width: 800px; margin: 0 auto; }
            pre { white-space: pre-wrap; font-size: 16px; background: #f5f5f5; padding: 20px; border-radius: 8px; }
            .header { text-align: center; margin-bottom: 30px; color: #0284c7; }
            .footer { text-align: center; margin-top: 30px; color: #6b7280; font-size: 14px; }
            @media print {
              body { padding: 0; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>Extracted Text from SnapToText.ng</h1>
            <p>Generated on ${new Date().toLocaleString()}</p>
          </div>
          <pre>${text}</pre>
          <div class="footer">
            <p>Generated by SnapToText.ng - Free OCR tool</p>
          </div>
        </body>
        </html>
      `);
      printWindow.document.close();
      printWindow.focus();
      printWindow.print();
    }

    function clearText() {
      if (output.value.trim() && !confirm('Are you sure you want to clear the text?')) {
        return;
      }
      output.value = '';
      updateCharCount();
      showToast('Text cleared');
    }

    document.addEventListener('DOMContentLoaded', () => {
      captureBtn.disabled = true;
      output.readOnly = false;
      switchCameraMode('user');
    });
  </script>
</body>
</html>